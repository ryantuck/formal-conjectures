# Review: Erdos Problem 1148

**Problem:** Representation as x² + y² - z² with bounded squares
**Source:** [erdosproblems.com/1148](https://www.erdosproblems.com/1148)
**Status:** OPEN

## Source Problem

Can every large integer n be expressed as n = x² + y² - z² where max(x², y², z²) ≤ n?

Known: The largest integer with no such representation is 6563. The problem becomes "obvious" when the constraint is relaxed to max(x², y², z²) ≤ n + 2√n.

## Current Formalization

```lean
@[category research open, AMS 11]
theorem sum_difference_squares :
    ∀ n : ℕ, ∃ a b : ℕ, n = a^2 + b^2 ∨ (n : ℤ) = |(a : ℤ)^2 - (b : ℤ)^2| := by
  sorry
```

## Critical Analysis

### 1. Wrong number of variables (CRITICAL)

The source uses THREE variables: n = x² + y² - z². This is a single expression involving a sum of two squares minus a third square. The formalization uses TWO variables with a disjunction: n = a² + b² OR n = |a² - b²|. These are fundamentally different representations.

The source's n = x² + y² - z² allows three independent variables (e.g., 6 = 3² + 1² - 2² = 9 + 1 - 4). The formalization's disjunction asks for either a sum of two squares or a difference of two squares, each with only two variables.

### 2. Missing the constraint max(x², y², z²) ≤ n (CRITICAL)

The source's crucial constraint is that all squares involved are bounded by n: max(x², y², z²) ≤ n. Without this constraint, the representation n = x² + y² - z² is trivially achievable for all n (e.g., take z = 0 and use Lagrange's theorem, or use algebraic identities). The constraint makes the problem non-trivial. The formalization has no such bound.

### 3. "For all n" vs "for all large n" (MODERATE)

The source says "every large integer n," meaning there should be an eventual threshold. The formalization asserts `∀ n : ℕ`, requiring it for ALL n including small ones. Since 6563 is known to have no representation, the formalization as stated (∀ n) is actually false.

### 4. The disjunction makes the statement nearly trivial (CRITICAL)

The formalization asks: is n a sum of two squares, or an absolute difference of two squares? Many numbers are sums of two squares (all primes ≡ 1 mod 4, etc.), and many others are differences (any odd number n = ((n+1)/2)² - ((n-1)/2)²). Together, the disjunction likely covers all natural numbers, making the statement trivially true or close to it. For example:
- Odd n: n = ((n+1)/2)² - ((n-1)/2)² always works
- Even n = 2: 1² + 1² = 2
- Even n = 4: 2² + 0² = 4
- Even n = 6: not a sum of two squares, and |a² - b²| = 6 has no solution (checking: (a-b)(a+b) = 6 requires same-parity factors, but 6 = 2·3 has different parity). So n = 6 might be a counterexample to the formalization.

Actually, n = 6 as |a² - b²|: need |a² - b²| = 6. Since a² - b² = (a-b)(a+b), we need factor pairs of 6: 1×6 (a=3.5, no), 2×3 (a=2.5, no). So 6 is not |a² - b²|. And 6 is not a sum of two squares (6 has factor 3¹ where 3 ≡ 3 mod 4 with odd exponent). So the formalization is FALSE for n = 6.

### 5. Missing answer(sorry) for open problem (MODERATE)

The formalization asserts the result as a theorem rather than using `answer(sorry) ↔ ...` for an open problem.

## What a proper formalization would look like

```lean
@[category research open, AMS 11]
theorem sum_difference_squares :
    answer(sorry) ↔
      ∀ᶠ n in Filter.atTop, ∃ x y z : ℕ,
        (n : ℤ) = (x : ℤ)^2 + (y : ℤ)^2 - (z : ℤ)^2 ∧
        max (max (x^2) (y^2)) (z^2) ≤ n := by
  sorry
```

Key fixes: (1) three variables x, y, z; (2) single expression x² + y² - z²; (3) the constraint max(x², y², z²) ≤ n; (4) "for all large n" via `∀ᶠ n in atTop`; (5) `answer(sorry)` wrapper.

## Confidence: **5%**

The formalization captures a completely different mathematical statement. It uses two variables instead of three, a disjunction instead of a single expression, drops the critical boundedness constraint, and requires the result for all n (making it false for n = 6). The source problem's depth comes entirely from the constraint max(x², y², z²) ≤ n, which is absent. This needs a complete rewrite.
