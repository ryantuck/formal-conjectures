# Review: Erdos Problem 1127

**Problem:** Decomposition of R^n into countably many sets with distinct pairwise distances
**Source:** [erdosproblems.com/1127](https://www.erdosproblems.com/1127)
**Status:** SOLVED (under CH)

## Source Problem

Can R^n be decomposed into countably many sets, such that within each set all pairwise distances are distinct?

For n=1: true under CH (Erdos-Kakutani). For n=2: true under CH (Davies 1972). For all n: true under CH (Kunen 1987). The dependence on CH appears necessary.

## Current Formalization

```lean
@[category research solved, AMS 52]
theorem euclidean_space_distinct_distance_decomposition (n : ℕ) :
    ∃ (partition : ℕ → Set (EuclideanSpace ℝ (Fin n))),
      (∀ i j, i ≠ j → Disjoint (partition i) (partition j)) ∧
      (⋃ i, partition i) = Set.univ ∧
      (∀ i, ∀ x ∈ partition i, ∀ y ∈ partition i, ∀ z ∈ partition i,
        x ≠ y → y ≠ z → x ≠ z → dist x y ≠ dist y z) := by
  sorry
```

## Critical Analysis

### 1. Core structure is mostly correct (POSITIVE)

The formalization correctly captures:
- Countable partition of R^n (indexed by N)
- Pairwise disjointness
- Union equals the whole space

### 2. Distinct distances condition is too weak (MODERATE)

The source says "all pairwise distances are distinct," meaning for any four points a, b, c, d in the same part with {a,b} != {c,d}, we need dist(a,b) != dist(c,d). The formalization only checks three points: x != y, y != z, x != z implies dist(x,y) != dist(y,z). This misses the case dist(x,y) != dist(x,z) and dist(y,z) != dist(x,z). More precisely, "all pairwise distances are distinct" means: for any four (not necessarily distinct) points a, b, c, d with (a,b) != (c,d) as unordered pairs, dist(a,b) != dist(c,d).

The formalization only compares two of the three possible distances among three points. It should state that for any four points x, y, u, v in the same part, if {x,y} != {u,v} as unordered pairs, then dist(x,y) != dist(u,v).

### 3. Missing CH assumption (MODERATE)

The result is known to hold under the Continuum Hypothesis but may fail without it. Erdos and Hajnal showed limitations without CH. The formalization states this unconditionally, which may make it unprovable (or even false) in ZFC alone. Whether this matters depends on the project's conventions for set-theoretic axioms.

### 4. Correct use of EuclideanSpace (POSITIVE)

The parameterization by n and use of `EuclideanSpace R (Fin n)` is appropriate.

## What a proper formalization would look like

```lean
@[category research solved, AMS 52]
theorem euclidean_space_distinct_distance_decomposition (n : ℕ) :
    ∃ (partition : ℕ → Set (EuclideanSpace ℝ (Fin n))),
      (∀ i j, i ≠ j → Disjoint (partition i) (partition j)) ∧
      (⋃ i, partition i) = Set.univ ∧
      (∀ i, ∀ x ∈ partition i, ∀ y ∈ partition i,
        ∀ u ∈ partition i, ∀ v ∈ partition i,
        x ≠ y → u ≠ v → (x = u ∧ y = v ∨ x = v ∧ y = u) ∨
          dist x y ≠ dist u v) := by
  sorry
```

(Ideally with a CH axiom or note about the set-theoretic dependency.)

## Confidence: **55%**

The formalization captures the main structure well: countable partition of R^n with a distance-distinctness condition on each piece. The main issues are that the distinctness condition only considers three points at a time (missing some distance comparisons) and the absence of the CH assumption. The overall shape is recognizably correct.
