# Review: Erdos Problem 1126

**Problem:** Almost-everywhere additive functions extend to everywhere additive
**Source:** [erdosproblems.com/1126](https://www.erdosproblems.com/1126)
**Status:** PROVED

## Source Problem

If f satisfies f(x+y) = f(x) + f(y) for almost all x, y in R, then there exists g such that g(x+y) = g(x) + g(y) for all x, y in R, and f(x) = g(x) for almost all x.

Independently proved by de Bruijn (1966) and Jurkat (1965).

## Current Formalization

```lean
@[category research solved, AMS 26]
theorem additive_function_measurability :
    ∀ (f : ℝ → ℝ),
      (∀ᵐ (x : ℝ), ∀ᵐ (y : ℝ), f (x + y) = f x + f y) →
      ∃ (g : ℝ → ℝ), (∀ x y, g (x + y) = g x + g y) ∧
        (∀ᵐ x, f x = g x) := by
  sorry
```

## Critical Analysis

### 1. Core structure is correct (POSITIVE)

The formalization correctly captures the main logical structure:
- Hypothesis: f is additive for almost all pairs (x, y)
- Conclusion: there exists g that is additive everywhere and agrees with f almost everywhere

### 2. Almost-everywhere quantification structure (MINOR)

The source says "f(x+y) = f(x) + f(y) for almost all x, y in R." This means the set of pairs (x,y) where the equation fails has measure zero in R^2. The formalization uses nested almost-everywhere quantifiers: `∀ᵐ x, ∀ᵐ y, ...`, which by Fubini's theorem is equivalent to the product measure condition (the set of bad pairs has measure zero in the product measure). This is a reasonable encoding, though the precise equivalence depends on the measure-theoretic setup.

### 3. Measure specification (MINOR)

The `∀ᵐ` filter is with respect to the default MeasureSpace instance on R (Lebesgue measure), which is correct for this problem.

### 4. Name is slightly misleading (MINOR)

The theorem is named `additive_function_measurability` but the problem is not really about measurability -- it is about extending an almost-everywhere additive function to an everywhere additive function. A better name would be `additive_function_ae_extension` or similar.

## What a proper formalization would look like

The current formalization is substantially correct. Minor improvements:

```lean
@[category research solved, AMS 26]
theorem additive_function_ae_extension :
    ∀ (f : ℝ → ℝ),
      (∀ᵐ (x : ℝ), ∀ᵐ (y : ℝ), f (x + y) = f x + f y) →
      ∃ (g : ℝ → ℝ), (∀ x y, g (x + y) = g x + g y) ∧
        (∀ᵐ x, f x = g x) := by
  sorry
```

(The only change is the name; the mathematical content is correct.)

## Confidence: **85%**

This is a strong formalization. The hypothesis and conclusion both accurately capture the source problem. The use of nested `∀ᵐ` quantifiers is a reasonable encoding of "almost all pairs." The only potential concern is whether the nested a.e. quantification precisely matches the product-measure formulation, but by Fubini this is standard. The theorem name could be improved but the content is sound.
