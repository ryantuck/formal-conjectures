# Review: Erdos Problem 1134

**Problem:** Lower density of a set generated by linear operations
**Source:** [erdosproblems.com/1134](https://www.erdosproblems.com/1134)
**Status:** DISPROVED

## Source Problem

Let A be the smallest subset of the natural numbers containing 1 and closed under the operations x -> 2x+1, x -> 3x+1, x -> 6x+1. Does A have positive lower density?

Crampin and Hilton proved the answer is no: |A intersect [1,X]| << X^{tau + o(1)} where tau ~ 0.900626 is the unique positive root of 6^{-tau} + sum_{k >= 0} (3 * 2^k)^{-tau} = 1.

## Current Formalization

```lean
/-- Set closed under linear operations -/
def A : Set ℕ := sorry

/-- Lower density of set generated by linear operations.
    The conjecture that such a set has positive lower density has been disproved. -/
@[category research solved, AMS 11]
theorem linear_operation_set_density :
    answer(False) ↔ ∃ (c : ℝ), 0 < c ∧
      Filter.liminf (fun X => (A ∩ Set.Icc 1 X).ncard / X) Filter.atTop ≥ c := by
  sorry
```

## Critical Analysis

### 1. Correct overall structure (MINOR positive)

The formalization correctly states that the answer is False (the set does NOT have positive lower density) and uses `answer(False)` appropriately. The right-hand side asks whether there exists a positive constant c such that the lower density is at least c, and this being equivalent to False correctly encodes the disproof.

### 2. Definition of A is opaque (MODERATE)

The set `A` is defined as `sorry`. It should be the smallest set containing 1 and closed under x -> 2x+1, x -> 3x+1, x -> 6x+1. This could be defined as the intersection of all such sets, or inductively. Without a proper definition, the theorem is vacuous since A could be any set.

### 3. Type mismatch in density computation (MODERATE)

The expression `(A ∩ Set.Icc 1 X).ncard / X` involves natural number division since `ncard` returns `ℕ` and `X` would be `ℕ`. Natural number division truncates, making this expression always 0 or 1 for large enough X. For a meaningful density, one needs to cast to `ℝ`: `((A ∩ Set.Icc 1 X).ncard : ℝ) / (X : ℝ)`. Actually, looking more carefully, the `liminf` takes a function from `ℕ` and the division would need appropriate coercions. This may or may not typecheck depending on how Lean resolves the types.

### 4. Status correctly marked (MINOR positive)

The file correctly identifies this as DISPROVED/solved with `answer(False)`.

### 5. liminf vs lower density (MINOR)

Using `Filter.liminf` for lower density is conceptually correct, though the exact formulation depends on whether the filter and the function types align properly.

## What a proper formalization would look like

```lean
/-- The smallest set containing 1 and closed under x -> 2x+1, x -> 3x+1, x -> 6x+1 -/
def A : Set ℕ :=
  sInf {S : Set ℕ | 1 ∈ S ∧ ∀ x ∈ S, 2*x+1 ∈ S ∧ 3*x+1 ∈ S ∧ 6*x+1 ∈ S}

theorem linear_operation_set_density :
    answer(False) ↔ ∃ (c : ℝ), 0 < c ∧
      Filter.liminf (fun X : ℕ => ((A ∩ Set.Icc 1 X).ncard : ℝ) / (X : ℝ))
        Filter.atTop ≥ c := by
  sorry
```

## Confidence: **55%**

The formalization captures the correct mathematical claim: the set A does not have positive lower density (answer is False). The main issues are the opaque sorry definition of A (which is the most critical, as without it the theorem says nothing specific about the intended set) and a potential type issue in the density computation. The quantifier structure and answer elaborator usage are correct.
