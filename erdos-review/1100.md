# Review: Erdos Problem 1100

**Problem:** Properties of coprime consecutive divisors
**Source:** [erdosproblems.com/1100](https://www.erdosproblems.com/1100)
**Status:** OPEN

## Source Problem

Let d_1 < d_2 < ... < d_{tau(n)} = n denote the divisors of n. Define tau_perp(n) as the number of indices i such that consecutive divisors d_i and d_{i+1} are coprime.

Three questions are posed:

1. Does tau_perp(n)/omega(n) -> infinity for almost all n?
2. Does tau_perp(n) < exp((log n)^{o(1)}) hold for all n?
3. Determine g(k) = max_{omega(n)=k} tau_perp(n) over squarefree n with k prime divisors.

Known: tau_perp(n) >= omega(n), with equality for infinitely many n. Erdos-Hall showed max_{n<x} tau_perp(n) > exp((log log x)^{2-epsilon}). Erdos-Simonovits showed (sqrt(2)+o(1))^k < g(k) < (2-c)^k.

## Current Formalization

```lean
noncomputable def τ_perp (n : ℕ) : ℕ := sorry

theorem coprime_consecutive_divisors :
    Tendsto (fun n : ℕ => (τ_perp n : ℝ) / omega n) atTop atTop ∧
      (∀ n, (τ_perp n : ℝ) < Real.exp ((Real.log (n : ℝ)) ^ ((1 : ℝ)/2))) := by
  sorry
```

## Critical Analysis

### 1. tau_perp definition is sorry'd (MODERATE)

The definition `τ_perp` is `sorry`, so the mathematical content of "number of coprime consecutive divisor pairs" is not actually captured. This is a nontrivial combinatorial definition requiring enumerating the sorted list of divisors and counting coprime adjacent pairs. While using `sorry` for a definition is acceptable as a placeholder, it means the formalization is incomplete at its foundation.

### 2. "Almost all" vs "all" quantification (CRITICAL)

The source asks whether tau_perp(n)/omega(n) -> infinity **for almost all n** (i.e., the set of exceptions has density 0). The formalization states `Tendsto (fun n => tau_perp n / omega n) atTop atTop`, which claims the ratio tends to infinity **for all n** along the filter atTop. These are fundamentally different statements. The source explicitly uses "almost all" which in number theory means "for all n except a set of density 0." The formalization would need an asymptotic density filter or an explicit density condition.

### 3. Upper bound exponent is wrong (CRITICAL)

The source asks whether tau_perp(n) < exp((log n)^{o(1)}) for all n. The formalization uses `exp((log n)^(1/2))` which is `exp(sqrt(log n))`. These are very different: (log n)^{o(1)} is a function that grows slower than any positive power of log n (it approaches 1 as n -> infinity), while (log n)^{1/2} is a specific positive power. The formalized bound exp(sqrt(log n)) is much weaker than what the source asks. Furthermore, the source uses "for all n" whereas the formalization also uses "for all n" here, which is correct for this part.

### 4. Missing third question about g(k) (MODERATE)

The source poses three distinct questions. The third question about g(k) = max over squarefree n with omega(n)=k of tau_perp(n) is entirely absent from the formalization. The known bounds (sqrt(2)+o(1))^k < g(k) < (2-c)^k are not captured.

### 5. Two questions conjoined into one theorem (MINOR)

The first two questions are independent and should arguably be separate theorems rather than a conjunction. The `answer(sorry)` pattern is not used, even though both questions are open.

### 6. omega definition is fine (OK)

The local definition `def omega (n : ℕ) : ℕ := n.primeFactors.card` correctly captures the number of distinct prime factors.

## What a proper formalization would look like

```lean
/-- Question 1: tau_perp(n)/omega(n) -> infinity for almost all n.
    This requires an "almost all" quantifier (density 0 exceptions). -/
theorem coprime_consecutive_divisors_q1 :
    answer(sorry) ↔
      ∀ C : ℝ, 0 < C →
        (Nat.density {n : ℕ | (τ_perp n : ℝ) / omega n < C} = 0) := by
  sorry

/-- Question 2: tau_perp(n) < exp((log n)^{o(1)}) for all n.
    Formalized as: for all epsilon > 0, for all sufficiently large n,
    tau_perp(n) < exp((log n)^epsilon). -/
theorem coprime_consecutive_divisors_q2 :
    answer(sorry) ↔
      ∀ ε > 0, ∀ᶠ n in atTop,
        (τ_perp n : ℝ) < Real.exp ((Real.log n) ^ ε) := by
  sorry

/-- Question 3: Bounds on g(k). -/
noncomputable def g (k : ℕ) : ℕ :=
  sSup {τ_perp n | n : ℕ, Squarefree n ∧ omega n = k}

theorem coprime_consecutive_divisors_g_bounds :
    ∃ c > 0, ∀ᶠ k in atTop,
      (Real.sqrt 2) ^ k ≤ (g k : ℝ) ∧ (g k : ℝ) ≤ (2 - c) ^ k := by
  sorry
```

## Confidence: **20%**

The omega definition is correct and the general spirit of question 1 (tau_perp/omega grows) is present, but the "almost all" quantifier is replaced by a universal statement, the upper bound exponent is wrong, the tau_perp definition is sorry'd, and question 3 is entirely missing. The formalization captures the rough topic but not the precise mathematical content.
