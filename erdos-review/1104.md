# Review: Erdos Problem 1104

**Problem:** Maximum chromatic number of triangle-free graphs
**Source:** [erdosproblems.com/1104](https://www.erdosproblems.com/1104)
**Status:** OPEN (best bounds established, but exact asymptotics unknown)

## Source Problem

Let f(n) denote the maximum possible chromatic number of a triangle-free graph on n vertices. Estimate f(n).

Known bounds:
  (1-o(1)) * sqrt(n/log n) <= f(n) <= (2+o(1)) * sqrt(n/log n)

- Upper bound: Davies-Illingworth (2022)
- Lower bound: Hefty-Horn-King-Pfender (2025)

## Current Formalization

```lean
noncomputable def triangleFreeMaxChromatic (n : ‚Ñï) : ‚Ñï :=
  sSup {œá | ‚àÉ G : SimpleGraph (Fin n), G.CliqueFree 3 ‚àß G.chromaticNumber = œá}

theorem erdos_1104_lower :
    ‚àÉ c‚ÇÅ : ‚Ñù, 0 < c‚ÇÅ ‚àß c‚ÇÅ ‚â§ 1 ‚àß
      (‚àÄ·∂† n : ‚Ñï in atTop,
        c‚ÇÅ * Real.sqrt (n : ‚Ñù) / Real.sqrt (Real.log (n : ‚Ñù))
          ‚â§ (triangleFreeMaxChromatic n : ‚Ñù)) := by sorry

theorem erdos_1104_upper :
    ‚àÉ c‚ÇÇ : ‚Ñù, 2 ‚â§ c‚ÇÇ ‚àß
      (‚àÄ·∂† n : ‚Ñï in atTop,
        (triangleFreeMaxChromatic n : ‚Ñù)
          ‚â§ c‚ÇÇ * Real.sqrt (n : ‚Ñù) / Real.sqrt (Real.log (n : ‚Ñù))) := by sorry
```

## Critical Analysis

### 1. triangleFreeMaxChromatic definition (MODERATE)

The definition uses `sSup` over `{œá | ‚àÉ G : SimpleGraph (Fin n), G.CliqueFree 3 ‚àß G.chromaticNumber = œá}`. Since `chromaticNumber` returns an `‚Ñï‚àû` (ENat), the set contains ENat values, not ‚Ñï values. There may be a type mismatch unless there is an implicit coercion. Actually, looking at it again, the function returns `‚Ñï` and the set comprehension variable `œá` would need to be `‚Ñï`, so `G.chromaticNumber = œá` would need `œá : ‚Ñï‚àû` or there must be a coercion from ‚Ñï to ‚Ñï‚àû. For finite graphs on `Fin n`, the chromatic number is always finite, so this should be resolvable, but the `sSup` of a set of `‚Ñï‚àû` values gives `‚Ñï‚àû`, not `‚Ñï`. This definition may have a type issue.

Wait -- if the return type is `‚Ñï` and the set is `{œá : ‚Ñï | ...}`, then `G.chromaticNumber = œá` would require coercing `œá : ‚Ñï` to `‚Ñï‚àû`. This works because there is a coercion `‚Ñï ‚Üí ‚Ñï‚àû`. And `sSup` on a set of `‚Ñï` returns `‚Ñï` (with `sSup ‚àÖ = 0`). So the definition should be well-typed. For n = 0, Fin 0 is empty, and the only graph is the empty graph with chromatic number 0, so f(0) = 0. This seems fine.

### 2. Lower bound captures the right asymptotic (OK)

The lower bound `c‚ÇÅ * sqrt(n) / sqrt(log n)` with `0 < c‚ÇÅ ‚â§ 1` matches the source's `(1-o(1)) * sqrt(n/log n)`. The source says the constant approaches 1, so requiring `c‚ÇÅ ‚â§ 1` is appropriate. The formalization uses a fixed constant rather than `(1-o(1))`, which is a weaker but cleaner statement.

### 3. Upper bound captures the right asymptotic (OK)

The upper bound `c‚ÇÇ * sqrt(n) / sqrt(log n)` with `2 ‚â§ c‚ÇÇ` matches the source's `(2+o(1)) * sqrt(n/log n)`. The constant 2 in the lower bound for c‚ÇÇ correctly reflects that the leading constant in the upper bound is 2.

### 4. Status annotation says SOLVED but problem page says OPEN (MODERATE)

The source page indicates the problem is OPEN (the exact value of the constant is not known; only that it lies in [1,2]). The Lean file uses `@[category research solved, AMS 5]`, which marks it as solved. However, the specific bounds stated in the formalization are indeed proven results, so marking them as "solved" is defensible -- these are the known bounds, not the full conjecture. The exact asymptotic determination remains open.

### 5. sqrt(n)/sqrt(log n) vs sqrt(n/log n) (MINOR)

The formalization uses `sqrt(n) / sqrt(log n)` while the source uses `sqrt(n/log n)`. These are equal: sqrt(n/log n) = sqrt(n)/sqrt(log n). No issue.

### 6. The formalization addresses bounds, not the original question (MINOR)

The original Erdos question is to "estimate f(n)," which seeks the exact asymptotic. The formalization captures the best known upper and lower bounds but does not state the open conjecture about what the exact leading constant should be. This is reasonable since the exact constant is not conjectured.

## What a proper formalization would look like

The current formalization is quite good. One could additionally state the open question:

```lean
/-- Open: determine the exact leading constant c such that
    f(n) ~ c * sqrt(n/log n). The known bounds give c ‚àà [1, 2]. -/
@[category research open, AMS 5]
theorem erdos_1104_exact :
    ‚àÉ c : ‚Ñù, 1 ‚â§ c ‚àß c ‚â§ 2 ‚àß
      Tendsto (fun n : ‚Ñï => (triangleFreeMaxChromatic n : ‚Ñù) /
        Real.sqrt ((n : ‚Ñù) / Real.log n)) atTop (ùìù c) := by sorry
```

## Confidence: **82%**

The definition of f(n) is correct, the upper and lower bounds match the known results with appropriate constants, and the mathematical content is faithfully captured. The main concerns are the status annotation (solved vs open) and the absence of the exact asymptotic question. The formalization is a solid representation of the proven bounds.
