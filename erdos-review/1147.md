# Review: Erdos Problem 1147

**Problem:** Additive basis from irrational quadratic sequences
**Source:** [erdosproblems.com/1147](https://www.erdosproblems.com/1147)
**Status:** DISPROVED

## Source Problem

Let alpha > 0 be irrational. Is the set A = {n >= 1 : ‖alpha * n²‖ < 1/log(n)} an additive basis of order 2? (Here ‖x‖ denotes the distance to the nearest integer.)

Konieczny disproved this: the set is NOT a basis of order 2 for almost every alpha > 0, and also specifically fails for alpha = sqrt(2). More generally, for any epsilon(n) -> 0, the set {n : ‖alpha * n²‖ < epsilon(n)} is not a basis of order 2 for almost every alpha.

## Current Formalization

```lean
@[category research solved, AMS 11]
theorem irrational_quadratic_approximation_basis :
    let A := {n : ℕ | ∃ α : ℝ, Irrational α ∧ ∃ k : ℕ, |α^2 - (n : ℝ) / (k : ℝ)| < 1 / (k : ℝ)}
    answer(False) ↔ (∀ r : ℕ, ∃ m : ℕ, ∀ n ≥ m, ∃ (s : Finset ℕ),
      s.card ≤ r ∧ (∀ x ∈ s, x ∈ A) ∧ n = s.sum id) := by
  sorry
```

## Critical Analysis

### 1. Set A is completely wrong (CRITICAL)

The source defines A = {n >= 1 : ‖alpha * n²‖ < 1/log(n)}, where:
- alpha is a FIXED irrational number (given as a parameter)
- The condition is on ‖alpha * n²‖ (distance of alpha * n² to the nearest integer)
- The threshold is 1/log(n)

The formalization defines A = {n : ℕ | ∃ α : ℝ, Irrational α ∧ ∃ k : ℕ, |α² - n/k| < 1/k}, which:
- EXISTENTIALLY quantifies over alpha (so n ∈ A if there EXISTS any irrational alpha making it work), rather than fixing alpha
- Uses |α² - n/k| (approximation of α² by rationals n/k) rather than ‖α·n²‖ (distance of α·n² to integers)
- Has no logarithmic threshold
- The mathematical condition is completely different: Diophantine approximation to α² vs. distribution of α·n² mod 1

### 2. Additive basis definition targets wrong order (MODERATE)

The source asks about a basis of ORDER 2 (every large integer = a + b with a, b ∈ A). The formalization asks `∀ r : ℕ, ... s.card ≤ r ...`, which is a basis of EVERY order — a much stronger condition. The correct formalization would fix r = 2.

### 3. answer(False) direction (GOOD in principle)

Since the conjecture was disproved (A is NOT a basis of order 2), using `answer(False)` correctly encodes: the answer to "is A a basis of order 2?" is No. The biconditional `False ↔ P` asserts ¬P, which is correct. However, this only works if P is correctly stated.

### 4. alpha should be a parameter, not existentially quantified (CRITICAL)

The source problem is parameterized by a fixed irrational alpha. The disproof shows the result fails for almost every alpha and specifically for alpha = sqrt(2). The formalization should have alpha as a parameter (or universally quantified), not existentially quantified inside the set definition.

### 5. Category tag is correct (GOOD)

`@[category research solved, AMS 11]` correctly marks this as solved.

## What a proper formalization would look like

```lean
/-- Distance to nearest integer -/
noncomputable def distToInt (x : ℝ) : ℝ := |x - round x|

/-- For alpha = sqrt(2), the set A = {n >= 1 : ‖alpha*n²‖ < 1/log(n)}
    is NOT an additive basis of order 2 -/
@[category research solved, AMS 11]
theorem irrational_quadratic_approximation_basis :
    let α := Real.sqrt 2
    let A := {n : ℕ | 1 ≤ n ∧ distToInt (α * (n : ℝ)^2) < 1 / Real.log n}
    ¬ ∀ᶠ n in Filter.atTop, ∃ a ∈ A, ∃ b ∈ A, a + b = n := by
  sorry
```

## Confidence: **5%**

Nearly every component of the formalization is wrong. The set A uses the wrong mathematical condition (rational approximation to α² instead of ‖α·n²‖), existentially quantifies over α instead of fixing it, omits the logarithmic threshold, and the additive basis definition asks about all orders rather than order 2. Only the answer(False) direction and the category tag are correct. This needs a complete rewrite.
