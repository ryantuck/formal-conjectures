# Review: Erdos Problem 1107

**Problem:** Sums of r-powerful numbers
**Source:** [erdosproblems.com/1107](https://www.erdosproblems.com/1107)
**Status:** OPEN (r=2 case solved by Heath-Brown 1988)

## Source Problem

Let r >= 2. A number n is r-powerful if for every prime p dividing n, p^r divides n. Is every large integer the sum of at most r+1 many r-powerful numbers?

Heath-Brown (1988) proved the r=2 case: every sufficiently large integer is the sum of at most three 2-powerful (squareful) numbers.

## Current Formalization

```lean
def SumOfRPowerful (r n : ℕ) : Prop :=
  ∃ s : List ℕ, s.length ≤ r + 1 ∧ (∀ x ∈ s, Nat.Full r x) ∧ s.sum = n

theorem erdos_1107 : ∀ r ≥ 2, ∀ᶠ n in atTop, SumOfRPowerful r n := by sorry

theorem erdos_1107.variants.two : ∀ᶠ n in atTop, SumOfRPowerful 2 n := by sorry
```

## Critical Analysis

### 1. SumOfRPowerful definition is correct (OK)

The definition says "there exists a list s of natural numbers with length at most r+1, where every element is r-full (Nat.Full r x), and the sum equals n." This correctly captures "n is the sum of at most r+1 r-powerful numbers."

### 2. Nat.Full definition is correct (OK)

From the codebase: `def Full (k : ℕ) (n : ℕ) : Prop := ∀ p ∈ n.primeFactors, p^k ∣ n`. This says n is k-full if for every prime factor p of n, p^k divides n. This matches the definition of r-powerful numbers.

### 3. Note: Nat.Full includes 0 and 1 as r-powerful (MINOR)

By the definition, 0 and 1 are vacuously r-full for all r (they have no prime factors). This means the list s could contain 0s without contributing to the sum, effectively allowing fewer than r+1 nonzero summands. This is mathematically harmless -- adding zeros does not change the sum, and allowing it means "at most r+1" is automatically inclusive of "fewer than r+1." Including 1 as r-powerful is standard (1 has no prime factors).

### 4. Main conjecture correctly stated (OK)

`∀ r ≥ 2, ∀ᶠ n in atTop, SumOfRPowerful r n` says: for all r >= 2, every sufficiently large n is the sum of at most r+1 r-powerful numbers. This matches the source exactly.

### 5. Heath-Brown's result correctly stated (OK)

`∀ᶠ n in atTop, SumOfRPowerful 2 n` says: every sufficiently large n is the sum of at most 3 squareful numbers. This is exactly Heath-Brown's 1988 result. The `@[category research solved, AMS 11]` annotation correctly marks this as solved.

### 6. Status annotations are correct (OK)

The main conjecture is `@[category research open, AMS 11]` (correct -- it remains open for general r). The r=2 case is `@[category research solved, AMS 11]` (correct -- proved by Heath-Brown).

### 7. Using List vs Finset (MINOR)

Using `List ℕ` allows repeated elements and has a natural `.sum` and `.length`. An alternative would be `Multiset ℕ` or `Finset ℕ`, but `List` is the simplest choice here and does not introduce unwanted distinctness constraints. Since r-powerful numbers can repeat in a sum (e.g., 4 + 4 + 4), using List is appropriate.

## What a proper formalization would look like

The current formalization is excellent and needs no significant changes. One possible enhancement:

```lean
/-- The integers can be expressed as a sum of at most r+1 r-powerful numbers
    is equivalent to the original conjecture of Erdős and Ivić. -/
def SumOfRPowerful (r n : ℕ) : Prop :=
  ∃ s : List ℕ, s.length ≤ r + 1 ∧ (∀ x ∈ s, Nat.Full r x) ∧ s.sum = n

-- Current formalization is already correct.
```

## Confidence: **93%**

This is an excellent formalization. The r-powerful number definition via Nat.Full is correct, the SumOfRPowerful predicate faithfully captures the decomposition property, the main conjecture and the solved r=2 case are both correctly stated with appropriate status annotations, and the quantifier structure (for all r >= 2, eventually for all n) matches the source. The only minor notes are that 0 is vacuously r-powerful (harmless) and the choice of List over Multiset (reasonable).
