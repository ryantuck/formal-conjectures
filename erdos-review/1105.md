# Review: Erdos Problem 1105

**Problem:** Anti-Ramsey numbers for cycles and paths
**Source:** [erdosproblems.com/1105](https://www.erdosproblems.com/1105)
**Status:** PROVED (cycles by Montellano-Ballesteros and Neumann-Lara 2005; paths by Yuan 2021)

## Source Problem

Two conjectures on anti-Ramsey numbers:

**Conjecture 1 (Cycles):** For cycle C_k with k >= 3,
  AR(n, C_k) = ((k-2)/2 + 1/(k-1)) * n + O(1)

**Conjecture 2 (Paths):** For path P_k with l = floor((k-1)/2), n >= k >= 5,
  AR(n, P_k) = max(C(k-2,2) + 1, C(l-1,2) + (l-1)(n-l+1) + epsilon)
where epsilon = 1 if k is odd, epsilon = 2 if k is even.

Both conjectures have been proved.

## Current Formalization

```lean
theorem erdos_1105_cycles (k : ℕ) (hk : 3 ≤ k) :
    answer(sorry) ↔ ((fun n => (antiRamseyNum (cycleGraph k) n : ℝ) -
      ((k - 2 : ℝ) / 2 + 1 / (k - 1)) * n)
      =O[atTop] (fun _ => (1 : ℝ))) := by sorry

theorem erdos_1105_paths (k n : ℕ) (hk : 5 ≤ k) (hn : k ≤ n) :
    let ℓ := (k - 1) / 2
    let ε := if Odd k then 1 else 2
    answer(sorry) ↔ antiRamseyNum (pathGraph k) n =
      max ((k - 2).choose 2 + 1) ((ℓ - 1).choose 2 + (ℓ - 1) * (n - ℓ + 1) + ε) := by sorry
```

## Critical Analysis

### 1. Cycles theorem structure is correct (OK)

The cycles theorem states that `AR(n, C_k) - ((k-2)/2 + 1/(k-1)) * n = O(1)`, which is exactly the claim that AR(n, C_k) = ((k-2)/2 + 1/(k-1)) * n + O(1). The Big-O with constant function 1 correctly captures the O(1) term.

### 2. answer(sorry) used for proved results (MODERATE)

Both theorems use `answer(sorry)` even though both conjectures have been proved. The answer should be `answer(True)` (or just assert the statement directly without the answer elaborator). Since these are solved problems, the `answer(sorry)` is not appropriate -- it should either be `answer(True)` to indicate the answer is "yes" or the statement should be asserted directly.

### 3. Status annotation says OPEN but should be SOLVED (MODERATE)

The `@[category research open, AMS 05]` annotation marks both theorems as open, but the source clearly states both conjectures have been proved. This should be `@[category research solved, AMS 05]`.

### 4. antiRamseyNum and cycleGraph/pathGraph definitions (OK)

The `antiRamseyNum` is defined as the supremum of numbers of colors in edge-colorings of K_n avoiding rainbow copies of H. This matches the standard definition. The use of `cycleGraph k` and `pathGraph k` as the forbidden subgraphs is correct.

### 5. Paths theorem: exact formula for each (n,k) (OK)

The paths theorem gives the exact formula for AR(n, P_k) for each specific n >= k >= 5. The let bindings for l and epsilon are correct: l = floor((k-1)/2) is `(k - 1) / 2` in natural number division, and epsilon = 1 if k odd, 2 if k even.

### 6. Natural number subtraction in paths formula (MODERATE)

The expression `(ℓ - 1) * (n - ℓ + 1)` involves natural number subtraction. If l = 0 (which happens when k = 1, but k >= 5 ensures l >= 2), then `ℓ - 1` underflows. With k >= 5, we have l = (k-1)/2 >= 2, so l - 1 >= 1, and since n >= k >= 5 and l <= (k-1)/2 < k <= n, we have n - l + 1 >= n - k + 2 >= 2. So the subtraction is safe given the constraints. Similarly, `(k - 2).choose 2` with k >= 5 gives (k-2) >= 3, so the choose is well-defined.

### 7. Paths theorem quantifies over specific (k,n) rather than for all (MINOR)

The paths theorem takes specific `k n : ℕ` as parameters with hypotheses. This means it must be applied for each specific pair (k,n), which is correct -- the formula gives an exact value for each pair, not an asymptotic.

### 8. antiRamseyNum definition correctness (MODERATE)

Looking at the definition: `sSup {k | ∃ c : Sym2 (Fin n) → Fin k, ∀ f : H →g ⊤, ¬IsRainbow f c}`. This says: the supremum of k such that there exists a k-coloring of edges of K_n with no rainbow copy of H. This matches the standard definition of AR(n,H) as "the maximum number of colors in an edge-coloring of K_n with no rainbow H." However, `sSup` of a set of natural numbers could be 0 if the set is empty. For trivial cases (n < |V(H)|), there are no homomorphisms from H to K_n, so every coloring avoids rainbow H, and the sup would be infinite (or rather, sSup of an unbounded set gives 0 in ℕ by convention). This edge case is handled by the hypothesis constraints in the theorems.

## What a proper formalization would look like

```lean
/-- Proved by Montellano-Ballesteros and Neumann-Lara (2005). -/
@[category research solved, AMS 05]
theorem erdos_1105_cycles (k : ℕ) (hk : 3 ≤ k) :
    (fun n => (antiRamseyNum (cycleGraph k) n : ℝ) -
      ((k - 2 : ℝ) / 2 + 1 / (k - 1)) * n)
      =O[atTop] (fun _ => (1 : ℝ)) := by sorry

/-- Proved by Yuan (2021). -/
@[category research solved, AMS 05]
theorem erdos_1105_paths (k n : ℕ) (hk : 5 ≤ k) (hn : k ≤ n) :
    let ℓ := (k - 1) / 2
    let ε := if Odd k then 1 else 2
    antiRamseyNum (pathGraph k) n =
      max ((k - 2).choose 2 + 1) ((ℓ - 1).choose 2 + (ℓ - 1) * (n - ℓ + 1) + ε) := by sorry
```

## Confidence: **72%**

The mathematical content of both formulas is correctly captured. The main issues are: (1) the status annotation incorrectly marks these as open when they are solved, (2) `answer(sorry)` is used unnecessarily for proved results, and (3) there are potential edge-case concerns with the antiRamseyNum definition for degenerate inputs. The core mathematical formulas -- the cycle asymptotic and the exact path formula -- are faithfully represented.
