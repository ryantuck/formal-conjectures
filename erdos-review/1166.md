# Review: Erdos Problem 1166

**File:** `FormalConjectures/ErdosProblems/1166.lean`
**Source:** [erdosproblems.com/1166](https://www.erdosproblems.com/1166)
**Status:** SOLVED

## Original Problem

For a random walk in $\mathbb{Z}^2$, with $F(k)$ the set of favourite values at step $k$:

Is it true that $|\bigcup_{k \leq n} F(k)| \leq (\log n)^{O(1)}$ almost surely for all but finitely many $n$?

**Proved:** Almost surely $|\bigcup_{k \leq n} F(k)| \ll (\log n)^2$.

## Current Formalization

```lean
theorem union_favorite_sets_bound :
    answer(True) ↔
      ∃ (union_size : ℕ → ℕ) (C : ℝ), C > 0 ∧
        ∀ᶠ (n : ℕ) in atTop,
          (union_size n : ℝ) ≤ C * (Real.log n)^2 := by
  sorry
```

## Analysis

### What the formalization captures

| Aspect | Captured? | Notes |
|--------|-----------|-------|
| Question format | Yes | `answer(True)` for solved problem |
| $O((\log n)^2)$ bound | Yes | `≤ C * (Real.log n)^2` with `C > 0` |
| Eventually for large $n$ | Yes | `∀ᶠ (n : ℕ) in atTop` |
| Category/AMS tag | Yes | `@[category research solved, AMS 60]` |

### Critical issues

1. **Trivially true (Critical):** Take `union_size = fun _ => 0` and `C = 1`. The existential is satisfied instantly.

2. **`union_size` is a specific quantity:** It should be $|\bigcup_{k \leq n} F(k)|$ from the random walk. This is a well-defined random variable (depending on the walk), not an arbitrary function.

3. **"Almost surely" missing:** The result holds almost surely (with probability 1). The formalization makes a deterministic claim about a function.

4. **No random walk or $F(k)$ defined:** Same infrastructure gap as problems 1164 and 1165.

### Good aspects

- The bound form $C \cdot (\log n)^2$ is correct
- The `∀ᶠ in atTop` correctly encodes "for all but finitely many $n$"
- The docstring explains the connection to Problem 1165 and the Erdos-Taylor result

## Verdict

**Confidence: 10%**

Correct bound form but trivially satisfiable. The function `union_size` should be defined from the random walk process, and the "almost surely" qualification is absent.
