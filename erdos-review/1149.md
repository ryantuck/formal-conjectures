# Review: Erdos Problem 1149

**Problem:** Density of coprime pairs involving floor of n^alpha
**Source:** [erdosproblems.com/1149](https://www.erdosproblems.com/1149)
**Status:** PROVED

## Source Problem

Let alpha > 0 be a real number, not an integer. The natural density of integers n >= 1 for which gcd(n, âŒŠn^alphaâŒ‹) = 1 is 6/piÂ².

Proved by Bergelson and Richter (2017). The result shows the density equals the probability that two random integers are coprime â€” a striking connection.

## Current Formalization

```lean
@[category research solved, AMS 11]
theorem coprime_floor_density :
    âˆ€ (Î± : â„), Î± > 0 â†’ (âˆ€ (m : â„¤), Î± â‰  m) â†’
    âˆƒ (d : â„), d = 6 / Real.pi^2 âˆ§
    Tendsto (fun N : â„• => (Finset.filter (fun n =>
      n â‰¥ 1 âˆ§ Nat.gcd n âŒŠ(n : â„)^Î±âŒ‹â‚Š = 1) (Finset.range (N + 1))).card / (N : â„))
      atTop (ğ“ d) := by
  sorry
```

## Critical Analysis

### 1. Non-integer condition is correct (GOOD)

`âˆ€ (m : â„¤), Î± â‰  m` correctly states that alpha is not an integer. Combined with `Î± > 0`, this matches the source's "alpha > 0, not an integer." The use of integer quantification (âˆ€ m : â„¤) rather than natural number quantification is slightly more general but correct, since Î± > 0 already excludes non-positive integers.

### 2. Floor function usage is correct (GOOD)

`âŒŠ(n : â„)^Î±âŒ‹â‚Š` computes the natural number floor of n^alpha. Since n >= 1 and alpha > 0, we have n^alpha >= 1, so the natural number floor is at least 1. This matches the source's âŒŠn^alphaâŒ‹.

### 3. Coprimality condition is correct (GOOD)

`Nat.gcd n âŒŠ(n : â„)^Î±âŒ‹â‚Š = 1` correctly checks that gcd(n, âŒŠn^alphaâŒ‹) = 1, matching the source.

### 4. Density computation structure is correct (GOOD)

The density is computed as the count of qualifying n in {0, ..., N} divided by N, with the limit taken as N -> infinity. The filter `n â‰¥ 1` correctly excludes n = 0 from the count (the source says n >= 1). The target `ğ“ d` where `d = 6 / Real.pi^2` correctly states the density equals 6/piÂ².

### 5. Unnecessary existential wrapper (MINOR style issue)

The statement uses `âˆƒ (d : â„), d = 6 / Real.pi^2 âˆ§ Tendsto ... (ğ“ d)`. This is equivalent to the simpler `Tendsto ... (ğ“ (6 / Real.pi^2))`. The existential adds nothing mathematically â€” it just introduces an intermediate name for the density. This is a style issue, not a correctness issue.

### 6. Division coercion (MINOR)

The expression `(Finset.filter ...).card / (N : â„)` divides the cardinality (a â„•) by N coerced to â„. For this to yield a real division (not natural number division), the `.card` must be coerced to â„ first. Lean's type inference should handle this since the result needs to be â„ (for the Tendsto to ğ“ d), but an explicit cast `((Finset.filter ...).card : â„) / (N : â„)` would be clearer.

### 7. Decidability of the filter predicate (MINOR)

The predicate `fun n => n â‰¥ 1 âˆ§ Nat.gcd n âŒŠ(n : â„)^Î±âŒ‹â‚Š = 1` needs to be decidable for `Finset.filter` to work. The condition `n â‰¥ 1` is decidable. `Nat.gcd n âŒŠ(n : â„)^Î±âŒ‹â‚Š = 1` requires computing âŒŠ(n : â„)^Î±âŒ‹â‚Š, which involves real exponentiation â€” this is noncomputable. In practice, with `open Classical` or the noncomputable framework, this should be fine, but it means the definition is noncomputable.

### 8. Category tag is correct (GOOD)

`@[category research solved, AMS 11]` correctly marks this as a proved result in number theory.

### 9. Finset.range (N + 1) gives {0, ..., N} (GOOD)

`Finset.range (N + 1)` produces {0, 1, ..., N}, which after filtering for n >= 1 gives {1, ..., N}. Dividing the count by N gives the density over {1, ..., N}. This is the standard density computation.

## What a proper formalization would look like

The current formalization is essentially correct. A minor simplification:

```lean
@[category research solved, AMS 11]
theorem coprime_floor_density (Î± : â„) (hÎ± : Î± > 0) (hÎ±int : âˆ€ (m : â„¤), Î± â‰  m) :
    Tendsto (fun N : â„• =>
      ((Finset.filter (fun n => 1 â‰¤ n âˆ§ Nat.gcd n âŒŠ(n : â„)^Î±âŒ‹â‚Š = 1)
        (Finset.range (N + 1))).card : â„) / (N : â„))
      atTop (ğ“ (6 / Real.pi ^ 2)) := by
  sorry
```

The changes are: (1) make alpha a parameter rather than universally quantified inside; (2) remove the unnecessary existential wrapper; (3) add explicit â„ cast on .card.

## Confidence: **82%**

This is a solid formalization. The mathematical content â€” coprimality of n and âŒŠn^alphaâŒ‹, natural density, the target 6/piÂ² â€” all correctly match the source. The non-integer condition, floor function, and density computation are all properly encoded. The main concerns are minor: the unnecessary existential wrapper, potential coercion issues with division, and the noncomputability of the filter predicate. None of these affect the mathematical correctness of the statement.
