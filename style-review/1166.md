# Style Review: Erdős Problem 1166

**File:** `FormalConjectures/ErdosProblems/1166.lean`
**Review Date:** 2026-02-11
**Status:** ⚠️ **NEEDS FIX** - Trivial existential

## Summary
Union of favourite sets in random walks. The existential quantification makes it trivially satisfiable.

**Score:** 16/21 passing

## Issues

### Critical Issues

1. **Trivially true due to existential (Lines 46-50)** - ❌ **CRITICAL**
   ```lean
   theorem union_favorite_sets_bound :
       ∃ (C : ℝ), C > 0 ∧
         ∀ᶠ (n : ℕ) in atTop,
           ∃ (union_size : ℕ → ℕ),
             (union_size n : ℝ) ≤ C * (Real.log n)^2 := by
   ```

   The `∃ (union_size : ℕ → ℕ)` inside the atTop filter is trivially satisfiable.
   For any C > 0, just take union_size = λ _, 0.

   **Should define:** union_size should be the actual size of ⋃_{k ≤ n} F(k) from the random walk.

2. **Missing probabilistic framework** - ❌
   The docstring says "almost surely" but there's no probability in the statement.
   The random walk, F(k), and "almost surely" are all absent from the formalization.

3. **Missing definition of F(k)** - ❌
   The favorite set F(k) is never formally defined.

## Good Aspects
- ✅ Correct copyright header (2026)
- ✅ Proper imports and namespace
- ✅ Good documentation linking to Problem 1165 and Erdős-Taylor result
- ✅ Uses asymptotic notation: `∀ᶠ ... in atTop`
- ✅ Proper category: `research solved`
- ✅ AMS 60 (Probability) is appropriate
- ✅ File builds successfully

## Recommendations

**Priority 1:** Remove the inner existential. The union_size should be defined based on the random walk process:
```lean
-- Would need random walk definition
def unionFavoriteSetsSize (n : ℕ) : ℕ := sorry
```

**Priority 2:** Add "almost surely" or note its absence. Could use:
```lean
-- Almost surely (requires probability measure):
-- ℙ(∀ᶠ n, unionFavoriteSetsSize n ≤ C * (log n)²) = 1
```

**Priority 3:** Consider whether to keep existential over C or make it explicit

## Conclusion
**Status:** ⚠️ **NEEDS FIX** - The inner existential over union_size makes the statement trivially true. Missing probabilistic framework.
